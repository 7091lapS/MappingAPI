<!DOCTYPE html>
<html>
<head>
    <title>PublicaMundi - OpenLayers 3</title>
    <link rel="stylesheet" href="lib/OpenLayers/css/ol.css" type="text/css" />
    <style>
        body {
            padding: 0;
            margin: 0;
        }

        .map {
            width: 500px;
            height: 350px;
            margin-left: auto;
            margin-right: auto;
        }

        .ol-attribution ul, .ol-attribution a, .ol-attribution a:not([ie8andbelow]) {
            color: black !important;
        }
    </style>

    <script src="lib/jQuery/jquery-2.1.0.js"></script>
    <script src="lib/OpenLayers/build/ol-whitespace.js"></script>

    <script src="lib/PublicaMundi/PublicaMundi.js"></script>
    <script src="lib/PublicaMundi/map/Map.js"></script>
    <script src="lib/PublicaMundi/map/ol/Map.js"></script>
    <script src="lib/PublicaMundi/layer/Layer.WMS.js"></script>
    <script src="lib/PublicaMundi/layer/ol/Layer.Tile.js"></script>
    <script src="lib/PublicaMundi/layer/ol/Layer.WMS.js"></script>
    <script src="lib/PublicaMundi/layer/ol/Layer.GeoJson.js"></script>
</head>
<body>
    <div id="map" class="map"></div>
</body>
<script>
    var map = new ol.Map({
        target: 'map',
        view: new ol.View2D({
            projection: 'EPSG:3857',
            center: [-10939408.106956497, 4561776.910611016],
            zoom: 3
        }),
        controls: ol.control.defaults().extend([
        ]),
        ol3Logo: false
    });

    PublicaMundi.noConflict();

    var onFeatureClick = function (features) {
        alert(JSON.stringify(features));
    };

    var pmMap = PublicaMundi.map(map);

    pmMap.addLayer({
        title: 'Open Street Maps',
        type: PublicaMundi.LayerType.TILE,
        url: 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'
    });

    pmMap.addLayer({
        title: 'Crops',
        type: PublicaMundi.LayerType.WMS,
        url: 'http://webservices.nationalatlas.gov/wms/agriculture',
        params: { 'LAYERS': 'crop_1' }
    });

    pmMap.addLayer({
        type: PublicaMundi.LayerType.GeoJSON,
        title: 'Countries',
        url: 'data/geojson/countries.geojson',
        click: onFeatureClick
    });

    pmMap.geoJSON({
        title: 'Earthquakes',
        url: 'data/geojson/earthquakes.json',
        click: onFeatureClick
    });
</script>
</html>
