/* PublicaMundi Mapping API version 0.1.0 2014-10-27 */

!function(a,b){"use strict";"undefined"!=typeof b&&(b.define("PublicaMundi.Leaflet"),b.Leaflet.Framework="leaflet",b.registerFrameworkResolver(b.Leaflet.Framework,function(){return b.isObject(L)&&b.isFunction(L.Map)?!0:!1}))}(window,PublicaMundi),function(a,b,c){"undefined"!=typeof b&&"undefined"!=typeof c&&(b.define("PublicaMundi.Leaflet"),b.Leaflet.Map=b.Class(b.Map,{initialize:function(a){if(b.Map.prototype.initialize.call(this,a),this._unproject=function(a){var b=c.point(a[0],a[1]).divideBy(6378137);return c.CRS.EPSG3857.projection.unproject(b)},this._map=b.isClass("L.Map")&&a instanceof c.Map?a:c.map(a.target,{center:this._unproject(a.center),zoom:a.zoom,attributionControl:!1}),"undefined"!=typeof a.layers&&b.isArray(a.layers))for(var d=0;d<a.layers.length;d++)this.createLayer(a.layers[d])},setCenter:function(a,c){b.isArray(a)?this._map.setView(this._unproject(a),this._map.getZoom()):this._map.setView(this._unproject([a,c]),this._map.getZoom())},getCenter:function(){var a=this._map.getCenter();return a=c.CRS.EPSG3857.projection.project(a).multiplyBy(6378137),[a.x,a.y]},setZoom:function(a){this._map.setView(this._map.getCenter(),a)},getZoom:function(){return this._map.getZoom()},getProjection:function(){return"EPSG:3857"},getTarget:function(){return this._map.getTarget()},addLayer:function(a){this._map.addLayer(a.getLayer())}}),b.locator.register("PublicaMundi.Map",b.Leaflet.Map))}(window,window.PublicaMundi,L),function(a,b,c){"undefined"!=typeof b&&"undefined"!=typeof c&&(b.define("PublicaMundi.Leaflet.Layer"),b.Leaflet.Layer.WMS=b.Class(b.Layer,{initialize:function(a){b.Layer.prototype.initialize.call(this,a),this._layer=c.tileLayer.wms(a.url,{layers:a.params.LAYERS,format:"image/png",transparent:!0})}}),b.registry.registerLayerType({layer:b.LayerType.WMS,framework:b.Leaflet.Framework,type:"PublicaMundi.Layer.WMS",factory:b.Leaflet.Layer.WMS}))}(window,window.PublicaMundi,L),function(a,b,c){"undefined"!=typeof b&&"undefined"!=typeof c&&(b.define("PublicaMundi.Leaflet.Layer"),b.Leaflet.Layer.Tile=b.Class(b.Layer,{initialize:function(a){b.Layer.prototype.initialize.call(this,a),this._layer=c.tileLayer(a.url)}}),b.registry.registerLayerType({layer:b.LayerType.TILE,framework:b.Leaflet.Framework,type:"PublicaMundi.Layer.Tile",factory:b.Leaflet.Layer.Tile}))}(window,window.PublicaMundi,L),function(a,b,c,d){"undefined"!=typeof b&&"undefined"!=typeof c&&(b.define("PublicaMundi.Leaflet.Layer"),b.Leaflet.Layer.GeoJson=b.Class(b.Layer,{initialize:function(a){b.Layer.prototype.initialize.call(this,a),!b.isDefined(a.projection);var e=null;b.isFunction(a.click)&&(e=function(b){a.click([b.target.feature.properties])}),this._layer=c.geoJson(null,{style:{color:"#3399CC",weight:1.25,opacity:1,fillColor:"#FFFFFF",fillOpacity:.4},pointToLayer:function(a,b){return c.circleMarker(b,{radius:5,fillColor:"#FFFFFF",fillOpacity:.4,color:"#3399CC",weight:1.25,opacity:1})},onEachFeature:function(a,c){b.isFunction(e)&&c.on({click:e})}}),d.ajax({type:"GET",url:a.url,dataType:"json",context:this,success:function(a){this._layer.addData(a)}})}}),b.registry.registerLayerType({layer:b.LayerType.GeoJSON,framework:b.Leaflet.Framework,type:"PublicaMundi.Layer.GeoJson",factory:b.Leaflet.Layer.GeoJson}),b.isDefined(b.Map)&&(b.Map.prototype.geoJSON=function(a){a.type=a.type||b.LayerType.GeoJSON,this.createLayer(a)}))}(window,window.PublicaMundi,L,jQuery);
//# sourceMappingURL=publicamundi.leaflet.js.map